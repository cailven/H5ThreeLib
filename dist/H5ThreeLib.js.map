{"version":3,"file":"H5ThreeLib.js","sources":["../web/util/ThreejsTool.ts","../web/util/LightManager.ts","../web/util/Math3d.ts","../web/util/GeoManager.ts","../web/util/ComposerManager.ts","../web/util/MainLib.ts"],"sourcesContent":["/**\r\n * Created by zhangcailven on 2018/6/6.\r\n */\r\nexport class ThreejsTool {\r\n\r\n    constructor() {\r\n        window[\"scene\"] = this.scene;\r\n        window[\"camera\"] = this.camera;\r\n        window[\"renderer\"] = this.renderer;\r\n        window[\"composer\"] = this.composer;\r\n    }\r\n\r\n    private scene;\r\n    private camera;\r\n    private renderer;\r\n    private controls;\r\n    private container;\r\n    private raycaster;\r\n    private mouse;\r\n    private composer;\r\n\r\n    public init(container) {\r\n        var s = this;\r\n        this.scene = new THREE.Scene();\r\n        this.scene.name = \"scene\";\r\n        // this.scene.background = new THREE.Color(0xff0000);\r\n        this.camera = new THREE.PerspectiveCamera(64, window.innerWidth / window.innerHeight, 1, 5000); // 创建摄影机\r\n        // this.camera.position.set(-100, 25, 100);\r\n        // this.camera.lookAt(0, 30, 0);\r\n        this.camera.position.z = 150;\r\n        this.camera.updateProjectionMatrix();\r\n        this.renderer = new THREE.WebGLRenderer({antialias: true});\r\n        this.renderer.setPixelRatio(2);\r\n        this.renderer.setSize(window.innerWidth, window.innerHeight);\r\n        this.renderer.setClearColor(0x00000, 1);\r\n        this.renderer.shadowMap.enabled = true;\r\n        this.renderer.localClippingEnabled = true;\r\n        // var globalPlane = new THREE.Plane( new THREE.Vector3( 1, 0, 0 ), 1 );\r\n        // this.renderer.clippingPlanes = [ globalPlane ];\r\n\r\n        this.container = document.getElementById(container);\r\n        this.container.appendChild(this.renderer.domElement);\r\n\r\n        window.addEventListener(\"touchstart\", function (evt: TouchEvent) {\r\n            s.mouse.x = (evt.changedTouches[0].clientX / window.innerWidth) * 2 - 1;\r\n            s.mouse.y = -(evt.changedTouches[0].clientY / window.innerHeight) * 2 + 1;\r\n        })\r\n\r\n        this.raycaster = new THREE.Raycaster();\r\n        window[\"scene\"] = this.scene;\r\n        window[\"camera\"] = this.camera;\r\n        window[\"renderer\"] = this.renderer;\r\n        window[\"ThreejsTool\"] = this;\r\n        ThreejsTool.initEnd();\r\n\r\n        // console.log(\"init\");\r\n\r\n        function animate() {\r\n            requestAnimationFrame(animate);\r\n            if (ThreejsTool.callbackArr.length > 0) {\r\n                for (var i = 0; i < ThreejsTool.callbackArr.length; i++) {\r\n                    ThreejsTool.callbackArr[i]();\r\n                }\r\n            }\r\n            ray();\r\n            if (window[\"composer\"]) {\r\n                // this.renderer.autoClear = false;\r\n                // this.renderer.clear();\r\n                // console.log(\"composer\");\r\n                window[\"composer\"].render();\r\n\r\n            } else {\r\n                // console.log(\"render\");\r\n                s.renderer.render(s.scene, s.camera);\r\n            }\r\n\r\n            if (s.controls) {\r\n                s.controls.update();\r\n            }\r\n        }\r\n\r\n\r\n        this.mouse = new THREE.Vector2(-1, -1);\r\n\r\n        function ray() {\r\n            s.raycaster.setFromCamera(s.mouse, s.camera);\r\n            var intersects = s.raycaster.intersectObjects(s.scene.children);\r\n            for (var i = 0; i < intersects.length; i++) {\r\n                if (ThreejsTool.rayData.length > 0) {\r\n                    for (var j = 0; j < ThreejsTool.rayData.length; j++) {\r\n                        var _name;\r\n                        if (typeof(ThreejsTool.rayData[j].name) == \"string\") {\r\n                            _name = ThreejsTool.rayData[j].name;\r\n                        } else {\r\n                            _name = ThreejsTool.rayData[j].name.name;\r\n                        }\r\n                        if (intersects[i]) {\r\n                            if (_name == intersects[i].object.name) {\r\n                                ThreejsTool.rayData[j].func(intersects[i].object);\r\n                            }\r\n                        }\r\n\r\n                    }\r\n                }\r\n            }\r\n            s.mouse.x = -1;\r\n            s.mouse.y = -1;\r\n        }\r\n\r\n\r\n        animate();\r\n        // window.addEventListener('resize', onWindowResize, false);\r\n\r\n        window.addEventListener(\"resize\", function () {\r\n            setTimeout(function () {\r\n                onWindowResize()\r\n            }, 200);\r\n        });\r\n\r\n\r\n        function onWindowResize() {\r\n            s.camera.aspect = window.innerWidth / window.innerHeight;\r\n            s.camera.updateProjectionMatrix();\r\n\r\n\r\n            var width = window.innerWidth;\r\n            var height = window.innerHeight;\r\n            var pixelRatio = window[\"renderer\"].getPixelRatio();\r\n\r\n            if (window[\"composer\"]) {\r\n                window[\"composer\"].setSize(width, height );\r\n            } else {\r\n                window[\"renderer\"].setSize(width, height);\r\n            }\r\n\r\n        }\r\n    }\r\n\r\n\r\n    public static initEnd;\r\n\r\n    public static rayData: Array<any> = [];\r\n\r\n\r\n    public helpbox(pos) {\r\n        var cubeGeo = new THREE.CubeGeometry(10, 10, 10);\r\n        var cube = new THREE.Mesh(cubeGeo, new THREE.MeshBasicMaterial({\r\n            color: 0xff0000,\r\n        }));\r\n        cube.position.set(pos.x, pos.y, pos.z);\r\n        this.scene.add(cube);\r\n        return cube;\r\n    }\r\n\r\n    public setCenter(mesh) {\r\n        if (mesh.geometry) {\r\n            mesh.geometry.computeBoundingBox();\r\n            var a = mesh.geometry.boundingBox.max.clone().add(mesh.geometry.boundingBox.min);\r\n            a.multiplyScalar(0.5);\r\n            mesh.geometry.center();\r\n        }\r\n    }\r\n\r\n    public computeObj3dBoundBox(container: THREE.Object3D): Object {\r\n\r\n        var min1 = new THREE.Vector3();\r\n        var max1 = new THREE.Vector3();\r\n        for (var i in container.children) {\r\n            var mesh = container.children[i];\r\n            var geo = mesh[\"geometry\"];\r\n            if (geo) {\r\n                geo.computeBoundingBox();\r\n                console.log(mesh.position);\r\n                var min = geo.boundingBox.min.clone().add(mesh.position);\r\n                var max = geo.boundingBox.max.clone().add(mesh.position);\r\n                min1.x = Math.min(min1.x, min.x);\r\n                min1.y = Math.min(min1.y, min.y);\r\n                min1.z = Math.min(min1.z, min.z);\r\n                max1.x = Math.max(max1.x, max.x);\r\n                max1.y = Math.max(max1.y, max.y);\r\n                max1.z = Math.max(max1.z, max.z);\r\n            }\r\n        }\r\n\r\n        return {\r\n            min: min1,\r\n            max: max1\r\n        }\r\n    }\r\n\r\n    private static callbackArr = [];\r\n\r\n\r\n    public static active(callBack) {\r\n        ThreejsTool.callbackArr.push(callBack);\r\n    }\r\n\r\n    public static setRayData(name, func) {\r\n        var obj = {name: name, func: func};\r\n        ThreejsTool.rayData.push(obj);\r\n    };\r\n\r\n\r\n    public createOrbitControls() {\r\n        this.controls = new THREE.OrbitControls(this.camera, this.container);\r\n        window[\"controls\"] = this.controls;\r\n        return this.controls;\r\n    }\r\n\r\n\r\n}","export class LightManager {\r\n\r\n    constructor() {\r\n\r\n        this.scene = window[\"scene\"];\r\n        this.camera = window[\"camera\"];\r\n        this.renderer = window[\"renderer\"];\r\n    }\r\n\r\n    private scene;\r\n    private camera;\r\n    private renderer;\r\n\r\n\r\n    public addAmbientLight(color = \"#ffffff\", intensity = 1.0): THREE.AmbientLight {\r\n        var light = new THREE.AmbientLight(color, intensity);\r\n        this.scene.add(light);\r\n        return light;\r\n    }\r\n\r\n    public addSpotLight(color = \"#ffffff\", intensity = 1.0, angle = null, dist = 500, shadow = null): THREE.SpotLight {\r\n        var light = new THREE.SpotLight(color, intensity, dist, angle);\r\n        if (shadow) {\r\n            light.castShadow = true;\r\n            light.shadow.mapSize.width = 1024;\r\n            light.shadow.mapSize.height = 1024;\r\n            light.shadow.camera.near = 1;\r\n            light.shadow.camera.far = 2000;\r\n        }\r\n        this.scene.add(light);\r\n        return light;\r\n    }\r\n\r\n    public addPointLight(color = \"#ffffff\", intensity = 1.0, dist = 500, shadow = null): THREE.PointLight {\r\n        var light = new THREE.PointLight(color, intensity, dist);\r\n        if (shadow) {\r\n            light.castShadow = true;\r\n            light.shadow.mapSize.width = 1024;\r\n            light.shadow.mapSize.height = 1024;\r\n            light.shadow.camera.near = 1;\r\n            light.shadow.camera.far = 2000;\r\n        }\r\n        this.scene.add(light);\r\n        return light;\r\n    }\r\n\r\n    public addHemisphereLight(color1 = \"#ff0000\", color2 = \"#0000ff\", intensity = 1.0): THREE.HemisphereLight {\r\n        var light = new THREE.HemisphereLight(color1, color2, intensity);\r\n        this.scene.add(light);\r\n        return light;\r\n    }\r\n}","export class Math3d {\r\n\r\n    constructor() {\r\n\r\n        this.scene = window[\"scene\"];\r\n        this.camera = window[\"camera\"];\r\n        this.renderer = window[\"renderer\"];\r\n    }\r\n\r\n    private scene;\r\n    private camera;\r\n    private renderer;\r\n\r\n    //计算公式\r\n    public static worldToScreenPosition(position, camera) {\r\n        var vector = new THREE.Vector3();\r\n        vector.copy(position);\r\n\r\n        var widthHalf = 0.5 * window.innerWidth;\r\n        var heightHalf = 0.5 * window.innerHeight;\r\n\r\n        vector.project(camera);\r\n        vector.x = (vector.x * widthHalf) + widthHalf;\r\n        vector.y = -(vector.y * heightHalf) + heightHalf;\r\n        return {\r\n            x: vector.x,\r\n            y: vector.y\r\n        }\r\n    }\r\n\r\n    public static horizontalAngle(object1, object2) {\r\n        var position1 = this.getWorldPosition(object1);\r\n        position1.y = 0;\r\n        position1.normalize();\r\n\r\n        var position2 = this.getWorldPosition(object2);\r\n        position2.y = 0;\r\n        position2.normalize();\r\n        return Math.acos(position1.dot(position2));\r\n    }\r\n\r\n    public static verticalAngle(object1, object2) {\r\n        var position1 = this.getWorldPosition(object1);\r\n        var position2 = this.getWorldPosition(object2);\r\n        position1.x = position2.x;\r\n        position1.z = position2.z;\r\n        position1.normalize();\r\n        position2.normalize();\r\n\r\n        return Math.acos(position1.dot(position2));\r\n    }\r\n\r\n    public static getWorldPosition(object) {\r\n        object.updateMatrixWorld(true);\r\n        object.updateMatrix();\r\n        var position = new THREE.Vector3();\r\n        position.setFromMatrixPosition(object.matrixWorld);\r\n\r\n        return position;\r\n    }\r\n\r\n    public static Math = {\r\n        radians: function (degrees) {\r\n            return degrees * Math.PI / 180;\r\n        },\r\n        degrees: function (radians) {\r\n            return radians * 180 / Math.PI;\r\n        },\r\n        inverseLerp: function (a, b, value) {\r\n            if (a < b) {\r\n                if (value <= a)\r\n                    return 0;\r\n                else if (value >= b)\r\n                    return 1;\r\n                else\r\n                    return (value - a) / (b - a);\r\n            }\r\n            else if (a > b) {\r\n                if (value >= a)\r\n                    return 0;\r\n                else if (value <= b)\r\n                    return 1;\r\n                else\r\n                    return (a - value) / (a - b);\r\n            }\r\n            return 0;\r\n        }\r\n\r\n    }\r\n\r\n}","export class GeoManager {\r\n    constructor() {\r\n        this.scene = window[\"scene\"];\r\n        this.camera = window[\"camera\"];\r\n        this.renderer = window[\"renderer\"];\r\n    }\r\n\r\n    private scene;\r\n    private camera;\r\n    private renderer;\r\n\r\n    public createCube(_width = 10, _hight = 10, _depth = 10, pos = new THREE.Vector3(0, 0, 0)) {\r\n        var cubeGeo = new THREE.CubeGeometry(_width, _hight, _depth);\r\n        var cube = new THREE.Mesh(cubeGeo, new THREE.MeshNormalMaterial());\r\n        cube.position.set(pos.x, pos.y, pos.z);\r\n        this.scene.add(cube);\r\n        return cube;\r\n    }\r\n\r\n}","///<reference path=\"../dts/three-effectcomposer.d.ts\"/>\r\n\r\nexport class ComposerManager {\r\n    constructor() {\r\n        this.scene = window[\"scene\"];\r\n        this.camera = window[\"camera\"];\r\n        this.renderer = window[\"renderer\"];\r\n        this.composer = window[\"composer\"];\r\n    }\r\n\r\n    private scene;\r\n    private camera;\r\n    private renderer;\r\n    private composer;\r\n\r\n    public createComposer(passes) {\r\n        if (this.composer) {\r\n            return false;\r\n        }\r\n        this.composer = new THREE.EffectComposer(this.renderer);\r\n        var renderPass = new THREE.RenderPass(this.scene, this.camera);\r\n        this.composer.addPass(renderPass);\r\n        for (var i = 0; i < passes.length; i++) {\r\n            var pass = passes[i];\r\n            pass.renderToScreen = (i === passes.length - 1);\r\n            this.composer.addPass(pass);\r\n        }\r\n        window[\"composer\"] = this.composer;\r\n    }\r\n\r\n    public setComposerShader(_uniforms, _fragmentShader): Object {\r\n        var shader = {\r\n            uniforms: _uniforms,\r\n            vertexShader: [\r\n                \"varying vec2 vUv;\",\r\n                \"void main() {\",\r\n                \"vUv = uv;\",\r\n                \"gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\",\r\n                \"}\"\r\n\r\n            ].join(\"\\n\"),\r\n            fragmentShader: _fragmentShader\r\n        };\r\n        return shader;\r\n    }\r\n\r\n}","import {ThreejsTool} from \"./ThreejsTool\";\r\nimport {LightManager} from \"./LightManager\";\r\nimport {Math3d} from \"./Math3d\";\r\nimport {GeoManager} from \"./GeoManager\";\r\nimport {ComposerManager} from \"./ComposerManager\";\r\n\r\nexport let init3D = new ThreejsTool();\r\nexport let lights;\r\nexport let math;\r\nexport let geos;\r\nexport let composer;\r\n\r\nexport let active = ThreejsTool.active;\r\n\r\nexport let setRayData = ThreejsTool.setRayData;\r\n\r\nThreejsTool.initEnd = function () {\r\n    lights = new LightManager();\r\n    math = new Math3d();\r\n    geos = new GeoManager();\r\n    composer = new ComposerManager();\r\n}\r\n\r\n\r\n\r\n"],"names":["lights","math","geos","composer"],"mappings":"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"}